@model Shoppers.Web.Mvc.Models.OrderCreateViewModel
@{
    ViewData["Title"] = "Checkout";
    var cartItems = ViewBag.CartItems as List<Shoppers.Data.Entities.CartItemEntity>;
    decimal totalPrice = ViewBag.TotalPrice != null ? (decimal)ViewBag.TotalPrice : 0;
}

<div class="bg-light py-3">
    <div class="container">
        <div class="row">
            <div class="col-md-12 mb-0">
                <a href="/Home/Index">Home</a> <span class="mx-2 mb-0">/</span> <strong class="text-black">Checkout</strong>
            </div>
        </div>
    </div>
</div>

<div class="site-section">
    <div class="container">
        <form asp-action="Create" method="post">
            <div class="row">

                <div class="col-md-6 mb-5 mb-md-0">
                    <h2 class="h3 mb-3 text-black">Billing Details</h2>
                    <div class="p-3 p-lg-5 border">

                        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                        <div class="form-group">
                            <label asp-for="Address" class="text-black">Address <span class="text-danger">*</span></label>
                            <textarea asp-for="Address" class="form-control" rows="3" placeholder="Street address"></textarea>
                            <span asp-validation-for="Address" class="text-danger"></span>
                        </div>

                        <h4 class="mb-3 mt-5">Payment Info (Fake)</h4>

                        <div class="form-group">
                            <label asp-for="CardHolderName" class="text-black">Name on Card <span class="text-danger">*</span></label>
                            <input asp-for="CardHolderName" class="form-control">
                            <span asp-validation-for="CardHolderName" class="text-danger"></span>
                        </div>

                        <div class="form-group">
                            <label asp-for="CardNumber" class="text-black">Card Number <span class="text-danger">*</span></label>
                            <input asp-for="CardNumber" class="form-control" placeholder="0000 0000 0000 0000">
                            <span asp-validation-for="CardNumber" class="text-danger"></span>
                        </div>

                        <div class="form-group row">
                            <div class="col-md-6">
                                <label asp-for="ExpirationDate" class="text-black">Expiration (MM/YY)</label>
                                <input asp-for="ExpirationDate" class="form-control" placeholder="MM/YY">
                                <span asp-validation-for="ExpirationDate" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="Cvc" class="text-black">CVC</label>
                                <input asp-for="Cvc" class="form-control" placeholder="123">
                                <span asp-validation-for="Cvc" class="text-danger"></span>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Sağ Taraf: Sipariş Özeti -->
                <div class="col-md-6">
                    <div class="row mb-5">
                        <div class="col-md-12">
                            <h2 class="h3 mb-3 text-black">Your Order</h2>
                            <div class="p-3 p-lg-5 border">
                                <table class="table site-block-order-table mb-5">
                                    <thead>
                                    <th>Product</th>
                                    <th>Total</th>
                                    </thead>
                                    <tbody>
                                        @if (cartItems != null)
                                        {
                                            foreach (var item in cartItems)
                                            {
                                                <tr>
                                                    <td>@item.Product.Name <strong class="mx-2">x</strong> @item.Quantity</td>
                                                    <td>@((item.Product.Price * item.Quantity).ToString("C"))</td>
                                                </tr>
                                            }
                                        }
                                        <tr>
                                            <td class="text-black font-weight-bold"><strong>Order Total</strong></td>
                                            <td class="text-black font-weight-bold"><strong>@totalPrice.ToString("C")</strong></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <div class="form-group">
                                    <button type="submit" class="btn btn-primary btn-lg py-3 btn-block">Place Order</button>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}